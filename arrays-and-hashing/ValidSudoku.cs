using System.Diagnostics;

var sol = new Solution();

Debug.Assert(sol.IsValidSudoku([['1','2','.','.','3','.','.','.','.'],
                            ['4','.','.','5','.','.','.','.','.'],
                            ['.','9','8','.','.','.','.','.','3'],
                            ['5','.','.','.','6','.','.','.','4'],
                            ['.','.','.','8','.','3','.','.','5'],
                            ['7','.','.','.','2','.','.','.','6'],
                            ['.','.','.','.','.','.','2','.','.'],
                            ['.','.','.','4','1','9','.','.','8'],
                            ['.','.','.','.','8','.','.','7','9']]));


Debug.Assert(!sol.IsValidSudoku([['1','2','.','.','3','.','.','.','.'],
                            ['4','.','.','5','.','.','.','.','.'],
                            ['.','9','1','.','.','.','.','.','3'],
                            ['5','.','.','.','6','.','.','.','4'],
                            ['.','.','.','8','.','3','.','.','5'],
                            ['7','.','.','.','2','.','.','.','6'],
                            ['.','.','.','.','.','.','2','.','.'],
                            ['.','.','.','4','1','9','.','.','8'],
                            ['.','.','.','.','8','.','.','7','9']]));


public class Solution {
    public bool IsValidSudoku(char[][] board) {
        int[] rows = new int[9];
        int[] cols = new int[9];
        int[] squares = new int[9];

        for (int r = 0; r < 9; r++) {
            for (int c = 0; c < 9; c++) {
                if (board[r][c] == '.') continue;

                int val = board[r][c] - '1';

                if ((rows[r] & (1 << val)) > 0 || (cols[c] & (1 << val)) > 0 ||
                    (squares[(r / 3) * 3 + (c / 3)] & (1 << val)) > 0) {
                    return false;
                }

                rows[r] |= (1 << val);
                cols[c] |= (1 << val);
                squares[(r / 3) * 3 + (c / 3)] |= (1 << val);
            }
        }
        return true;
    }
}